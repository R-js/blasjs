const base64 = 
'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';
export type CSYRKfn = (
    upper: boolean,
    transPose: boolean,
    n: number,
    k: number,
    alphaRe: number,
    alphaIm: number,
    betaRe: number,
    betaIm: number,
    isPacked: boolean
) => void;

type CSYRKMap = {
    storage: WebAssembly.Memory
    csyrk: CSYRKfn
    zsyrk: CSYRKfn
}

export default function initWasmCSYRK64(storage?: WebAssembly.Memory): CSYRKMap {
    const binary = Buffer.from(base64, 'base64');
    const mod = new WebAssembly.Module(binary);
    const mem = storage ? storage : new WebAssembly.Memory({ initial: 1 });
    const instance = new WebAssembly.Instance(mod, { env: { matrices: mem } });
    return {
        storage: mem,
        csyrk: instance.exports.csyrk as CSYRKfn,
        zsyrk: instance.exports.zsyrk as CSYRKfn
    }
}